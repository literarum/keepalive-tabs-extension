<!doctype html>
<html lang="ru">
    <head>
        <meta charset="UTF-8" />
        <title>KeepAlive - –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ —Å–ª–∞–π–¥–µ—Ä–∞</title>
        <style>
            * {
                margin: 0;
                padding: 0;
                box-sizing: border-box;
            }

            body {
                background: #0f172a;
                color: #e2e8f0;
                font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
                padding: 20px;
            }

            .container {
                max-width: 800px;
                margin: 0 auto;
            }

            h1 {
                font-size: 28px;
                margin-bottom: 20px;
                color: #f8fafc;
            }

            .test-group {
                background: #1e293b;
                border: 1px solid #334155;
                border-radius: 12px;
                padding: 20px;
                margin-bottom: 20px;
            }

            .test-group h2 {
                font-size: 16px;
                margin-bottom: 15px;
                color: #cbd5e1;
            }

            input[type='range'] {
                width: 100%;
                height: 8px;
                -webkit-appearance: none;
                -moz-appearance: none;
                appearance: none;
                border-radius: 4px;
                background: #334155;
                cursor: pointer;
                outline: none;
            }

            input[type='range']::-webkit-slider-thumb {
                -webkit-appearance: none;
                appearance: none;
                width: 24px;
                height: 24px;
                border-radius: 50%;
                background: #4f46e5;
                cursor: pointer;
                box-shadow: 0 0 0 4px rgba(79, 70, 229, 0.2);
                transition: all 150ms ease;
            }

            input[type='range']::-webkit-slider-thumb:hover {
                background: #3730a3;
                box-shadow: 0 0 0 8px rgba(79, 70, 229, 0.3);
                transform: scale(1.15);
            }

            input[type='range']::-moz-range-thumb {
                width: 24px;
                height: 24px;
                border-radius: 50%;
                background: #4f46e5;
                cursor: pointer;
                border: none;
                box-shadow: 0 0 0 4px rgba(79, 70, 229, 0.2);
                transition: all 150ms ease;
            }

            input[type='range']::-moz-range-thumb:hover {
                background: #3730a3;
                box-shadow: 0 0 0 8px rgba(79, 70, 229, 0.3);
                transform: scale(1.15);
            }

            input[type='range']::-moz-range-track {
                background: transparent;
                border: none;
            }

            input[type='range']::-moz-range-progress {
                background: #4f46e5;
                height: 8px;
            }

            .flex-row {
                display: flex;
                align-items: center;
                gap: 15px;
                margin-bottom: 20px;
            }

            .flex-row input {
                flex: 1;
                min-width: 0;
            }

            .value-display {
                min-width: 60px;
                text-align: right;
                font-weight: bold;
                color: #4f46e5;
                font-size: 18px;
            }

            .unit {
                min-width: 50px;
                text-align: left;
                color: #94a3b8;
            }

            .debug-output {
                background: #0f172a;
                border: 1px solid #334155;
                border-radius: 8px;
                padding: 15px;
                font-family: 'Monaco', 'Courier New', monospace;
                font-size: 12px;
                color: #cbd5e1;
                max-height: 300px;
                overflow-y: auto;
                margin-top: 15px;
            }

            .log-line {
                padding: 4px 0;
                border-bottom: 1px solid rgba(52, 65, 85, 0.3);
            }

            .log-line:last-child {
                border-bottom: none;
            }

            .log-success {
                color: #4ade80;
            }

            .log-error {
                color: #f87171;
            }

            .log-info {
                color: #60a5fa;
            }

            .status-box {
                background: #1e293b;
                border-left: 4px solid #4f46e5;
                padding: 15px;
                border-radius: 6px;
                margin: 20px 0;
            }

            .status-box.success {
                border-left-color: #4ade80;
                background: rgba(74, 222, 128, 0.05);
            }

            .status-box.error {
                border-left-color: #f87171;
                background: rgba(248, 113, 113, 0.05);
            }
        </style>
    </head>
    <body>
        <div class="container">
            <h1>üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ —Å–ª–∞–π–¥–µ—Ä–∞ KeepAlive Tabs</h1>

            <div class="test-group">
                <h2>1Ô∏è‚É£ –ü—Ä–æ—Å—Ç–æ–π —Ç–µ—Å—Ç –±–µ–∑ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π</h2>
                <div class="flex-row">
                    <input
                        type="range"
                        id="simpleSlider"
                        min="60"
                        max="600"
                        step="60"
                        value="120"
                    />
                    <span class="value-display" id="simpleValue">120</span>
                    <span class="unit">—Å–µ–∫</span>
                </div>
                <div class="debug-output" id="simpleLog"></div>
            </div>

            <div class="test-group">
                <h2>2Ô∏è‚É£ –¢–µ—Å—Ç —Å–æ —Å—Ç–∏–ª—è–º–∏ –∏–∑ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è</h2>
                <div class="flex-row">
                    <input
                        type="range"
                        id="styledSlider"
                        class="slider"
                        min="60"
                        max="600"
                        step="60"
                        value="180"
                        style="min-width: 0; width: 100%"
                    />
                    <span class="value-display" id="styledValue">180</span>
                    <span class="unit">—Å–µ–∫</span>
                </div>
                <div class="debug-output" id="styledLog"></div>
            </div>

            <div id="statusBox" class="status-box">–í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞...</div>
        </div>

        <script>
            // –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
            const logs = {
                simple: [],
                styled: [],
            };

            function log(type, msg, category = 'simple') {
                const timestamp = new Date().toLocaleTimeString('ru-RU');
                logs[category].push(`[${timestamp}] ${msg}`);
                updateLogs();
            }

            function updateLogs() {
                document.getElementById('simpleLog').innerHTML = logs.simple
                    .map((l) => `<div class="log-line log-info">${escapeHtml(l)}</div>`)
                    .join('');
                document.getElementById('styledLog').innerHTML = logs.styled
                    .map((l) => `<div class="log-line log-info">${escapeHtml(l)}</div>`)
                    .join('');
            }

            function escapeHtml(text) {
                const div = document.createElement('div');
                div.textContent = text;
                return div.innerHTML;
            }

            // –ü—Ä–æ—Å—Ç–æ–π —Å–ª–∞–π–¥–µ—Ä
            const simpleSlider = document.getElementById('simpleSlider');
            const simpleValue = document.getElementById('simpleValue');

            log('info', '‚úì –ü—Ä–æ—Å—Ç–æ–π —Å–ª–∞–π–¥–µ—Ä –Ω–∞–π–¥–µ–Ω', 'simple');
            log('info', `  ID: ${simpleSlider.id}`, 'simple');
            log('info', `  Type: ${simpleSlider.type}`, 'simple');
            log('info', `  Value: ${simpleSlider.value}`, 'simple');
            log('info', `  Display: flex-row`, 'simple');

            simpleSlider.addEventListener('input', (e) => {
                simpleValue.textContent = e.target.value;
                log('success', `‚úì Input event: ${e.target.value}`, 'simple');
            });

            simpleSlider.addEventListener('change', (e) => {
                log('success', `‚úì Change event: ${e.target.value}`, 'simple');
            });

            // –°—Ç–∏–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π —Å–ª–∞–π–¥–µ—Ä
            const styledSlider = document.getElementById('styledSlider');
            const styledValue = document.getElementById('styledValue');

            log('info', '‚úì –°—Ç–∏–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π —Å–ª–∞–π–¥–µ—Ä –Ω–∞–π–¥–µ–Ω', 'styled');
            log('info', `  ID: ${styledSlider.id}`, 'styled');
            log('info', `  Class: "${styledSlider.className}"`, 'styled');
            log('info', `  Value: ${styledSlider.value}`, 'styled');
            log('info', `  CSS inline: "${styledSlider.style.cssText}"`, 'styled');

            styledSlider.addEventListener('input', (e) => {
                styledValue.textContent = e.target.value;
                log('success', `‚úì Input event: ${e.target.value}`, 'styled');
            });

            styledSlider.addEventListener('change', (e) => {
                log('success', `‚úì Change event: ${e.target.value}`, 'styled');
            });

            // –ü—Ä–æ–≤–µ—Ä–∫–∞ CSS
            const computedStyle = window.getComputedStyle(styledSlider);
            log('info', `Computed width: ${computedStyle.width}`, 'styled');
            log('info', `Computed height: ${computedStyle.height}`, 'styled');
            log('info', `Computed display: ${computedStyle.display}`, 'styled');
            log('info', `Computed cursor: ${computedStyle.cursor}`, 'styled');

            // –ò—Ç–æ–≥–æ–≤—ã–π —Å—Ç–∞—Ç—É—Å
            setTimeout(() => {
                const statusBox = document.getElementById('statusBox');
                let html = '<strong>‚úì –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞:</strong><br><br>';
                html += '1. –û–±–∞ —Å–ª–∞–π–¥–µ—Ä–∞ –≤–∏–¥–Ω—ã –∏ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã<br>';
                html += '2. –°–æ–±—ã—Ç–∏—è input/change —Å—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç –ø—Ä–∏ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–∏<br>';
                html += '3. –û—Ç–ø—Ä–∞–≤—å—Ç–µ —Å–∫—Ä–∏–Ω—à–æ—Ç –∫–æ–Ω—Å–æ–ª–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞<br>';
                html += '<br><strong>–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:</strong><br>';
                html += '‚Ä¢ –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–µ—Ä–µ–º–µ—â–∞—Ç—å –æ–±–∞ –ø–æ–ª–∑—É–Ω–∫–∞ –º—ã—à–∫–æ–π<br>';
                html += '‚Ä¢ –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —á–∏—Å–ª–æ —Å–ø—Ä–∞–≤–∞ –º–µ–Ω—è–µ—Ç—Å—è<br>';
                html += '‚Ä¢ –û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å (F12) –∏ –ø–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –ª–æ–≥–∏<br>';

                statusBox.innerHTML = html;
                statusBox.classList.add('success');
            }, 500);
        </script>
    </body>
</html>
